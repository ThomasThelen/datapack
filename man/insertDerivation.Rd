% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DataPackage.R
\docType{methods}
\name{insertDerivation}
\alias{insertDerivation}
\alias{insertDerivation,DataPackage-method}
\title{Add provenance relationships to a DataPackage for a script execution.}
\usage{
insertDerivation(x, ...)

\S4method{insertDerivation}{DataPackage}(x, sources = list(),
  program = as.character(NA), derivations = list(), ...)
}
\arguments{
\item{x}{The \code{DataPackage} to add provenance relationships to.}

\item{...}{Additional parameters}

\item{sources}{A list of DataObjects for files that were read by the program. Alternatively, a list 
of DataObject identifiers can be specified.}

\item{program}{The DataObject created for the R script. Alternatively the DataObject identifier can
be specified.}

\item{derivations}{A list of DataObjects for files that were generated by the program. Alternatively, a list 
of DataObject identifiers can be specified.}
}
\description{
A DataPackage can store provenance relationships between the DataObjects in the package. 
The method \code{insertDerivation} will add provenance relationships between an R script, the files that
it used and the files that it generated.
}
\details{
This method operates on a DataPackage that has had DataObjects for the script, inputs and outputs
previously added to it. Provenance relationships from the ProvONE data model are added to the package. The
ProvONE data model can be viewed at \url{https://purl.dataone.org/provone-v1-dev}
}
\examples{
library(dataone)
library(datapack)
dp <- new("DataPackage")
inputs <- list()
outputs <- list()
# Add the script to the DataPackage
progObj <- new("DataObject", format="application/R", 
              filename=system.file("./extdata/pkg-example/logit-regression-example.R", package="datapack"), 
              suggestedFilename="logit-regression-example.R")
dp <- addData(dp, progObj)
# Add a script input to the DataPackage
inObj <- new("DataObject", format="text/csv", 
            filename=system.file("./extdata/pkg-example/binary.csv", package="datapack"), 
            suggestedFilename="binary.csv")
dp <- addData(dp, inObj)
inputs[[length(inputs)+1]] <- inObj
# Add a script output to the DataPackage
outObj <- new("DataObject", format="image/png", 
             filename=system.file("./extdata/pkg-example/gre-predicted.png", package="datapack"), 
             suggestedFilename="gre-predicted.png")
dp <- addData(dp, outObj)
outputs[[length(outputs)+1]] <- outObj
# Add the provenenace relationshps, linking the input and output to the script execution
dp <- insertDerivation(dp, sources = inputs, program = progObj, derivations = outputs) 
# View the results
head(getRelationships(dp))
}

